{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Documents/Front-end/Ciklum/X-course-task/x-course-task/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mac/Documents/Front-end/Ciklum/X-course-task/x-course-task/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./counter.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Counter(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),quantity=_useState2[0],setQuantity=_useState2[1],_useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedBooks=_useState4[0],setSelectedBooks=_useState4[1],addQuantity=function addQuantity(event){if(event.target.className==='up'||event.target.parentElement.className==='up'){if(+quantity>0&&+quantity<42){setQuantity(+quantity+1);}}else if(event.target.className==='down'||event.target.parentElement.className==='down'){if(+quantity>1&&+quantity<42){setQuantity(+quantity-1);}}},changeQuantity=function changeQuantity(event){if(+event.target.value<1){setQuantity(1);}else if(+event.target.value>42){setQuantity(42);}else{setQuantity(event.target.value);}},addBooks=function addBooks(book){var flag=false;selectedBooks.forEach(function(element){if(element.id===book.id){element.quantity+=quantity;flag=true;}else{return;}});if(!flag){book.quantity=quantity;setSelectedBooks([].concat(_toConsumableArray(selectedBooks),[book]));}localStorage.setItem('selectedBooks',JSON.stringify(selectedBooks));};useEffect(function(){var raw=localStorage.getItem('selectedBooks');localStorage.selectedBooks?setSelectedBooks(JSON.parse(raw)):setSelectedBooks(_toConsumableArray(selectedBooks));},[]);useEffect(function(){localStorage.setItem('selectedBooks',JSON.stringify(selectedBooks));},[selectedBooks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"price-calculate\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-calculate__price\",children:[\"Prise, $ \",/*#__PURE__*/_jsx(\"span\",{children:props.book.price})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"spinner\",children:\"Count\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"spinner\",\"data-testid\":\"spinner\",value:quantity,onChange:changeQuantity}),/*#__PURE__*/_jsx(\"button\",{className:\"up\",\"data-testid\":\"up\",onClick:addQuantity,children:/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(\"button\",{onClick:addQuantity,className:\"down\",children:/*#__PURE__*/_jsx(\"div\",{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-calculate__total\",id:\"total\",children:[\"Total price \",/*#__PURE__*/_jsx(\"span\",{children:(quantity*props.book.price).toFixed(2)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"price-calculate__add-cart\",children:/*#__PURE__*/_jsx(\"button\",{className:\"add-cart\",onClick:function onClick(){return addBooks(props.book);},type:\"button\",children:\"Add to cart\"})})]});}export default Counter;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Counter","props","_useState","_useState2","_slicedToArray","quantity","setQuantity","_useState3","_useState4","selectedBooks","setSelectedBooks","addQuantity","event","target","className","parentElement","changeQuantity","value","addBooks","book","flag","forEach","element","id","concat","_toConsumableArray","localStorage","setItem","JSON","stringify","raw","getItem","parse","children","price","htmlFor","type","onChange","onClick","toFixed"],"sources":["/Users/mac/Documents/Front-end/Ciklum/X-course-task/x-course-task/src/components/counter/counter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './counter.css';\n\nfunction Counter(props) {\n    const [quantity, setQuantity] = useState(1),\n        [selectedBooks, setSelectedBooks] = useState([]),\n        addQuantity = (event) => {\n            if (event.target.className === 'up' || event.target.parentElement.className === 'up') {\n                if (+quantity > 0 && +quantity < 42) {\n                    setQuantity(+quantity + 1)\n                }\n            } else if (event.target.className === 'down' || event.target.parentElement.className === 'down') {\n                if (+quantity > 1 && +quantity < 42) {\n                    setQuantity(+quantity - 1)\n                }\n            }\n        },\n        changeQuantity = (event) => {\n            if (+event.target.value < 1) {\n                setQuantity(1)\n            } else if (+event.target.value > 42) {\n                setQuantity(42)\n            } else {\n                setQuantity(event.target.value)\n            }\n\n        },\n        addBooks = (book) => {\n\n            let flag = false;\n            selectedBooks.forEach((element) => {\n                if (element.id === book.id) {\n                    element.quantity += quantity;\n                    flag = true;\n                } else {\n                    return\n                }\n            });\n            if (!flag) {\n                book.quantity = quantity;\n                setSelectedBooks([\n                    ...selectedBooks,\n                    book\n                ])\n            }\n            localStorage.setItem('selectedBooks', JSON.stringify(selectedBooks))\n        }\n\n    useEffect(() => {\n        const raw = localStorage.getItem('selectedBooks');\n        localStorage.selectedBooks ? setSelectedBooks(JSON.parse(raw)) : setSelectedBooks([...selectedBooks])\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('selectedBooks', JSON.stringify(selectedBooks));\n    }, [selectedBooks])\n\n\n    return (\n        <div className=\"price-calculate\">\n            <div className='price-calculate__price'>Prise, $ <span>{props.book.price}</span></div>\n            <p>\n                <label htmlFor=\"spinner\">Count</label>\n                <input\n                    type='number'\n                    id=\"spinner\"\n                    data-testid='spinner'\n                    value={quantity}\n                    onChange={changeQuantity} />\n                <button\n                    className='up'\n                    data-testid='up'\n                    onClick={addQuantity}><div></div></button>\n                <button\n                    onClick={addQuantity}\n                    className='down'><div></div></button>\n            </p>\n            <div className='price-calculate__total' id=\"total\">Total price <span>{(quantity * props.book.price).toFixed(2)}</span></div>\n            <div className='price-calculate__add-cart'>\n                <button\n                    className='add-cart'\n\n                    onClick={() => addBooks(props.book)}\n                    type=\"button\">\n                    Add to cart\n                </button>\n            </div>\n        </div>\n\n    )\n}\n\nexport default Counter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}